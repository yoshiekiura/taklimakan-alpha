
    <script nonce="{{ csp_nonce() }}">

        document.addEventListener('DOMContentLoaded', function() {
            $('.liker').on('click', like);
        });

        function like() {

            type = $(this).data('type');
            id = $(this).data('id');
            status = $(this).data('like');
            newStatus = Number(status) == 1 ? 0 : 1; // Revert current state

            alert('like ' + id + ' | ' +  type + ' | was=' + status + ' | new=' + newStatus);

            // alert(status);

            $.ajax({
                url: '/ajax/like',
                type: 'POST',
                contentType: 'application/json',
                dataType: 'json',
                data: JSON.stringify({ 'type': type, 'id': id, 'status': newStatus }),
                processData: false,
                success:
                    function(data, textStatus, jQxhr) {
                        if (data.code == 200) {
                            // NB! Set heart to RED or TRANSPARENT depending on status
                            alert('Success! ' + data.status + ' | ' + data.type + ' | ');
                            $(this).data('like', data.status);
                            alert('DATA! ' + $(this).data('like'));                            
                            if (data.status) {
                                $(this).addClass('like'); alert ('1 status'); }
                            else {
                                $(this).removeClass('like'); alert ('00 status'); }
                        } else {
                            console.log('[ERR] Some error while set like for element | ' + data.error);
                        }

                    },
                error:
                    function(jqXhr, textStatus, errorThrown) {
                        console.log('[ERR] AJAX error!');
                    }
            });
        }

    </script>
